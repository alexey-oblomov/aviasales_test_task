(this["webpackJsonpapp-timers"]=this["webpackJsonpapp-timers"]||[]).push([[0],{20:function(e,t,a){e.exports=a(50)},25:function(e,t,a){},26:function(e,t,a){},27:function(e,t,a){},28:function(e,t,a){},31:function(e,t,a){},32:function(e,t,a){},50:function(e,t,a){"use strict";a.r(t);var c=a(0),n=a.n(c),s=a(18),r=a.n(s),l=(a(25),a(2)),o=a(7),i=a(3),m=a(4),p=a(5),u=a(6);a(26),a(27);function d(){return n.a.createElement("div",{className:"header-wrapper"},n.a.createElement("div",{className:"logo"}))}a(28);function h(e){var t=e.handleFilter,a=e.stopsData;return n.a.createElement("form",{className:"form-checkbox"},n.a.createElement("div",{className:"inputs-block"},n.a.createElement("div",{className:"checkbox-heading"},"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"),n.a.createElement("div",{className:"checkbox"},n.a.createElement("label",{className:"checkbox__label"},n.a.createElement("input",{className:"checkbox__input",type:"checkbox",id:"all",onChange:t,checked:a.all}),n.a.createElement("span",{className:"checkbox__box"}),"\u0412\u0441\u0435")),n.a.createElement("div",{className:"checkbox"},n.a.createElement("label",{className:"checkbox__label"},n.a.createElement("input",{className:"checkbox__input",type:"checkbox",id:"noStops",onChange:t,checked:a.noStops}),n.a.createElement("span",{className:"checkbox__box"}),"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a")),n.a.createElement("div",{className:"checkbox"},n.a.createElement("label",{className:"checkbox__label"},n.a.createElement("input",{className:"checkbox__input",type:"checkbox",id:"oneStop",onChange:t,checked:a.oneStop}),n.a.createElement("span",{className:"checkbox__box"}),"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430")),n.a.createElement("div",{className:"checkbox"},n.a.createElement("label",{className:"checkbox__label"},n.a.createElement("input",{className:"checkbox__input",type:"checkbox",id:"twoStops",onChange:t,checked:a.twoStops}),n.a.createElement("span",{className:"checkbox__box"}),"2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438")),n.a.createElement("div",{className:"checkbox"},n.a.createElement("label",{className:"checkbox__label"},n.a.createElement("input",{className:"checkbox__input",type:"checkbox",id:"threeStops",onChange:t,checked:a.threeStops}),n.a.createElement("span",{className:"checkbox__box"}),"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"))))}var k=a(19);a(31),a(32);function v(e){var t=e.ticket;if(!t)return n.a.createElement("div",null," \u0411\u0438\u043b\u0435\u0442\u044b \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u044b");var a=t.carrier,c=t.price,s=t.segments,r="http://pics.avs.io/99/36/".concat(a,".png"),l=s[0],o=l.origin,i=l.destination,m=l.duration,p=l.stops,u=s[1],d=u.origin,h=u.destination,k=u.duration,v=u.stops,_=function(e){var t=e.toString(),a=t.length;if(a>3){t.split("");var c=a-1-3,n=t.slice(e[0],c+1),s=t.slice(c+1,a+1);return t=n+" "+s}return t}(c);return n.a.createElement("div",{className:"ticket-wrapper"},n.a.createElement("div",{className:"ticket-header"},n.a.createElement("div",{className:"ticket-header__price"},_," \u0420"),n.a.createElement("div",{className:"ticket-header__logo"},n.a.createElement("img",{src:r,alt:""}))),n.a.createElement("div",{className:"ticked-forward__container"},n.a.createElement("div",{className:"ticket-forward__header"},n.a.createElement("div",{className:"ticket-forward__header-route"},n.a.createElement("span",{className:"ticket-forward__header-route--span"},o," - ",i)),n.a.createElement("div",{className:"ticket-forward__header-length"},n.a.createElement("span",{className:"ticket-forward__header-length--span"},"\u0412 \u043f\u0443\u0442\u0438")),n.a.createElement("div",{className:"ticket-forward__header-stops"},n.a.createElement("span",{className:"ticket-forward__header-stops--span"},"\u041f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438 ",p.length))),n.a.createElement("div",{className:"ticket-forward__value"},n.a.createElement("div",{className:"ticket-forward__value-route"},n.a.createElement("span",{className:"ticket-forward__value-route--span"},"10:45-18:00")),n.a.createElement("div",{className:"ticket-forward__value-length"},n.a.createElement("span",{className:"ticket-forward__value-length--span"},m)),n.a.createElement("div",{className:"ticket-forward__value-stops"},n.a.createElement("span",{className:"ticket-forward__value-stops--span"},p.join(" "))))),n.a.createElement("div",{className:"ticked-back-container"},n.a.createElement("div",{className:"ticket-back__header"},n.a.createElement("div",{className:"ticket-back__header-route"},n.a.createElement("span",{className:"ticket-back__header-route--span"},h," - ",d)),n.a.createElement("div",{className:"ticket-back__header-length"},n.a.createElement("span",{className:"ticket-back__header-length--span"},"\u0412 \u043f\u0443\u0442\u0438")),n.a.createElement("div",{className:"ticket-back__header-stops"},n.a.createElement("span",{className:"ticket-back__header-stops--span"},"\u041f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438 ",v.length))),n.a.createElement("div",{className:"ticket-back__value"},n.a.createElement("div",{className:"ticket-back__value-route"},n.a.createElement("span",{className:"ticket-back__value-route--span"},"10:45-18:00")),n.a.createElement("div",{className:"ticket-back__value-length"},n.a.createElement("span",{className:"ticket-back__value-length--span"},k)),n.a.createElement("div",{className:"ticket-back__value-stops"},n.a.createElement("span",{className:"ticket-back__value-stops--span"},v.join(" "))))))}function _(e){var t=e.displayTickets,a=e.handleSortByPrice,c=e.handleSortByDuration,s=(0===t.length?n.a.createElement("div",null,"\u0411\u0438\u043b\u0435\u0442\u043e\u0432 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e"):t.map((function(e){return n.a.createElement(v,{key:Object(k.uniqueId)(),ticket:e})})))||null;return n.a.createElement("div",{className:"main-window__wrapper"},n.a.createElement("div",{className:"main-window__btn-container"},n.a.createElement("div",null,n.a.createElement("button",{className:"btn btn-left btn-active",onClick:a},"\u0421\u0430\u043c\u044b\u0439 \u0434\u0435\u0448\u0435\u0432\u044b\u0439")),n.a.createElement("div",null,n.a.createElement("button",{className:"btn btn-right",onClick:c},"\u0421\u0430\u043c\u044b\u0439 \u0431\u044b\u0441\u0442\u0440\u044b\u0439"))),n.a.createElement("div",{className:"main-window__tickets-container"},s))}var b=a(8),f=a.n(b),E=function(){return f.a.get("https://front-test.beta.aviasales.ru/search").then((function(e){return e.data.searchId})).catch((function(e){return console.log(e)}))},N=function(e){var t="https://front-test.beta.aviasales.ru/tickets?searchId="+e;return f.a.get(t).then((function(e){return e.data})).catch((function(e){}))};function S(e){return e.sort((function(e,t){var a=e.price,c=t.price;return a<c?-1:a>c?1:0}))}function g(e){return e.sort((function(e,t){var a=e.segments[0].duration+e.segments[1].duration,c=t.segments[0].duration+t.segments[1].duration;return a<c?-1:a>c?1:0}))}function w(e){if(!e.currentTarget.classList.contains("btn-active"))for(var t=document.querySelectorAll("button"),a=0;a<t.length;a++)t[a].classList.toggle("btn-active")}var y=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(){var e;Object(i.a)(this,a);for(var c=arguments.length,n=new Array(c),s=0;s<c;s++)n[s]=arguments[s];return(e=t.call.apply(t,[this].concat(n))).state={tickets:[],displayTickets:[],numberOfDisplayed:5,stops:{all:!0,noStops:!0,oneStop:!0,twoStops:!0,threeStops:!0}},e.processingAllTickets=function(){E().then((function(t){e.getAllTickets(t)}))},e.getAllTickets=function(t){N(t).then((function(a){if(a){var c=a.stop,n=a.tickets;!1===c?(e.proccesingCurrenthPack(n),e.moveItemsToDisplayTickets(),e.getAllTickets(t)):!0===c&&(e.proccesingCurrenthPack(n),console.log("\u0421\u0442\u043e\u043f! \u041a\u043e\u043d\u0447\u0438\u043b\u0438\u0441\u044c \u0431\u0438\u043b\u0435\u0442\u044b. \u0412\u0441\u0435\u0433\u043e \u0431\u0438\u043b\u0435\u0442\u043e\u0432 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043e: ",e.state.tickets.length))}else e.getAllTickets(t)}))},e.proccesingCurrenthPack=function(t){var a=e.state.tickets;console.log("\u041f\u043e\u043b\u0443\u0447\u0430\u0435\u043c \u043f\u0430\u0447\u043a\u0443. \u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0431\u0438\u043b\u0435\u0442\u043e\u0432: ",t.length);var c=[].concat(Object(o.a)(a),Object(o.a)(t));e.filterByStops(),S(c),e.setState({tickets:c})},e.moveItemsToDisplayTickets=function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.state.tickets,a=e.state.numberOfDisplayed,c=[],n=0;n<a;n++)c.push(t[n]);e.setState({displayTickets:c})},e.handleSortByPrice=function(t){w(t),S(e.state.tickets),e.filterByStops()},e.handleSortByDuration=function(t){w(t),g(e.state.tickets),e.filterByStops()},e.handleFilter=function(t){var a=t.currentTarget.id,c=e.state.stops,n=c.all,s=c.noStops,r=c.oneStop,o=c.twoStops,i=c.threeStops,m=function(e){if("all"===e&&!1===n)return Object(l.a)({},c,{all:!0,noStops:!0,oneStop:!0,twoStops:!0,threeStops:!0});var t={noStops:Object(l.a)({},c,{noStops:!s,all:!1}),oneStop:Object(l.a)({},c,{oneStop:!r,all:!1}),twoStops:Object(l.a)({},c,{twoStops:!o,all:!1}),threeStops:Object(l.a)({},c,{threeStops:!i,all:!1}),all:Object(l.a)({},c,{all:!1,noStops:!1,oneStop:!1,twoStops:!1,threeStops:!1})};for(var a in t)if(a===e)return t[a]}(a);!1===m.all&&!0===m.noStops&&!0===m.oneStop&&!0===m.twoStops&&!0===m.threeStops&&(m=Object(l.a)({},c,{all:!0,noStops:!0,oneStop:!0,twoStops:!0,threeStops:!0})),e.setState({stops:m})},e.stopFilter=function(){var t=[],a=e.state.stops;for(var c in a)!0===a[c]&&(t=[].concat(Object(o.a)(t),[c]));var n={noStops:0,oneStop:1,twoStops:2,threeStops:3};return t=t.map((function(e){return n[e]}))},e.filterByStops=function(){var t=e.state.tickets,a=e.stopFilter();var c=t.filter((function(e){return function(e,t){for(var a=0;a<e.length;a++)if(e[a]===t)return!0;return!1}(a,e.segments[0].stops.length)}));e.moveItemsToDisplayTickets(c)},e}return Object(m.a)(a,[{key:"componentDidMount",value:function(){this.processingAllTickets()}},{key:"render",value:function(){var e=this.state,t=e.displayTickets,a=e.stops;return n.a.createElement("div",{className:"wrapper"},n.a.createElement("div",{className:"app"},n.a.createElement("div",{className:"header"},n.a.createElement(d,null)),n.a.createElement("div",{className:"main"},n.a.createElement("div",{className:"left-aside"},n.a.createElement(h,{handleFilter:this.handleFilter,stopsData:a})),n.a.createElement("div",{className:"right-aside"},n.a.createElement(_,{displayTickets:t,handleSortByPrice:this.handleSortByPrice,handleSortByDuration:this.handleSortByDuration})))))}}]),a}(n.a.Component),x=function(e){Object(u.a)(a,e);var t=Object(p.a)(a);function a(e){var c;return Object(i.a)(this,a),(c=t.call(this,e)).state={hasError:!1},c}return Object(m.a)(a,[{key:"render",value:function(){return this.state.hasError?n.a.createElement("h1",null,"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a. \u0421\u043a\u043e\u0440\u043e \u043f\u043e\u0447\u0438\u043d\u0438\u043c"):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),a}(n.a.Component);r.a.render(n.a.createElement(x,null,n.a.createElement(y,null)),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.1fc517a6.chunk.js.map