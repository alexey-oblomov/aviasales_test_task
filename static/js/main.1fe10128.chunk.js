(this["webpackJsonpapp-timers"]=this["webpackJsonpapp-timers"]||[]).push([[0],{20:function(e,a,t){e.exports=t(53)},25:function(e,a,t){},26:function(e,a,t){},27:function(e,a,t){},28:function(e,a,t){},29:function(e,a,t){},30:function(e,a,t){},48:function(e,a,t){},51:function(e,a,t){},52:function(e,a,t){},53:function(e,a,t){"use strict";t.r(a);var n=t(0),c=t.n(n),r=t(18),s=t.n(r),l=(t(25),t(2)),o=t(8),i=t(3),m=t(4),u=t(5),d=t(6);t(26),t(27);function p(){return c.a.createElement("div",{className:"header-wrapper"},c.a.createElement("div",{className:"logo"}))}t(28);function h(e){var a=e.handleFilter,t=e.stopsData;return c.a.createElement("form",{className:"form-checkbox"},c.a.createElement("div",{className:"inputs-block"},c.a.createElement("div",{className:"checkbox-heading"},"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"),c.a.createElement("div",{className:"checkbox"},c.a.createElement("label",{className:"checkbox__label"},c.a.createElement("input",{className:"checkbox__input",type:"checkbox",id:"all",onChange:a,checked:t.all}),c.a.createElement("span",{className:"checkbox__box"}),"\u0412\u0441\u0435")),c.a.createElement("div",{className:"checkbox"},c.a.createElement("label",{className:"checkbox__label"},c.a.createElement("input",{className:"checkbox__input",type:"checkbox",id:"noStops",onChange:a,checked:t.noStops}),c.a.createElement("span",{className:"checkbox__box"}),"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a")),c.a.createElement("div",{className:"checkbox"},c.a.createElement("label",{className:"checkbox__label"},c.a.createElement("input",{className:"checkbox__input",type:"checkbox",id:"oneStop",onChange:a,checked:t.oneStop}),c.a.createElement("span",{className:"checkbox__box"}),"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430")),c.a.createElement("div",{className:"checkbox"},c.a.createElement("label",{className:"checkbox__label"},c.a.createElement("input",{className:"checkbox__input",type:"checkbox",id:"twoStops",onChange:a,checked:t.twoStops}),c.a.createElement("span",{className:"checkbox__box"}),"2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438")),c.a.createElement("div",{className:"checkbox"},c.a.createElement("label",{className:"checkbox__label"},c.a.createElement("input",{className:"checkbox__input",type:"checkbox",id:"threeStops",onChange:a,checked:t.threeStops}),c.a.createElement("span",{className:"checkbox__box"}),"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"))))}t(29);function b(e){var a=e.handleChange,t=e.numberOfDisplayed;return c.a.createElement("div",{className:"number-panel-wrapper"},c.a.createElement("h1",{className:"title"},"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0431\u0438\u043b\u0435\u0442\u043e\u0432 \u0434\u043b\u044f \u043f\u043e\u043a\u0430\u0437\u0430: "),c.a.createElement("div",{className:"number-panel__inputs-block"},c.a.createElement("div",{className:"radiobox"},c.a.createElement("input",{type:"radio",name:"numberOfTickets",id:"5",className:"radiobox__input",onChange:a,checked:5===t}),c.a.createElement("label",{htmlFor:"5",className:"radiobox__label first-child"},"5")),c.a.createElement("div",{className:"radiobox"},c.a.createElement("input",{type:"radio",name:"numberOfTickets",id:"10",className:"radiobox__input",onChange:a,checked:10===t}),c.a.createElement("label",{htmlFor:"10",className:"radiobox__label"},"10")),c.a.createElement("div",{className:"radiobox"},c.a.createElement("input",{type:"radio",name:"numberOfTickets",id:"15",className:"radiobox__input",onChange:a,checked:15===t}),c.a.createElement("label",{htmlFor:"15",className:"radiobox__label"},"15")),c.a.createElement("div",{className:"radiobox"},c.a.createElement("input",{type:"radio",name:"numberOfTickets",id:"50",className:"radiobox__input",onChange:a,checked:50===t}),c.a.createElement("label",{htmlFor:"50",className:"radiobox__label last-child"},"50"))))}t(30);function E(e){var a=e.handleSortByPrice,t=e.handleSortByDuration;return c.a.createElement("div",{className:"main-window__wrapper"},c.a.createElement("div",{className:"main-window__btn-container"},c.a.createElement("div",null,c.a.createElement("button",{className:"btn btn-left btn-active",onClick:a},"\u0421\u0430\u043c\u044b\u0439 \u0434\u0435\u0448\u0435\u0432\u044b\u0439")),c.a.createElement("div",null,c.a.createElement("button",{className:"btn btn-right",onClick:t},"\u0421\u0430\u043c\u044b\u0439 \u0431\u044b\u0441\u0442\u0440\u044b\u0439"))))}var k=t(7),v=t.n(k),_=function(){return v.a.get("https://front-test.beta.aviasales.ru/search").then((function(e){return e.data.searchId})).catch((function(e){return console.log(e)}))},f=function(e){var a="https://front-test.beta.aviasales.ru/tickets?searchId="+e;return v.a.get(a).then((function(e){return e.data})).catch((function(e){}))};function N(e){return e.sort((function(e,a){var t=e.price,n=a.price;return t<n?-1:t>n?1:0}))}function g(e){return e.sort((function(e,a){var t=e.segments[0].duration+e.segments[1].duration,n=a.segments[0].duration+a.segments[1].duration;return t<n?-1:t>n?1:0}))}function y(e){if(!e.currentTarget.classList.contains("btn-active"))for(var a=document.querySelectorAll("button"),t=0;t<a.length;t++)a[t].classList.toggle("btn-active")}function S(){return v.a.get("https://www.cbr-xml-daily.ru/daily_json.js")}var x=function(e){var a={1:"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430",2:"2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438",3:"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438",0:"\u0431\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"};for(var t in a)if(Number(t)===e)return a[t]};function w(e){var a=Math.floor(e/60),t=e%60;return"".concat(a,"\u0447 ").concat(t,"\u043c ")}t(48);function D(e){var a=e.ticket,t=e.currencyExchange,n=e.currencyDisplayed;if(!a)return c.a.createElement("div",null);var r=a.carrier,s=a.segments,l=a.price,o=t.usd,i=t.eur,m="http://pics.avs.io/99/36/".concat(r,".png"),u=s[0],d=u.origin,p=u.destination,h=u.duration,b=u.stops,E=s[1],k=E.origin,v=E.destination,_=E.duration,f=E.stops;"USD"===n?l=Math.round(l/o):"EUR"===n&&(l=Math.round(l/i));var N=w(h),g=w(_),y=function(e){var a=e.toString(),t=a.length;if(t>3){a.split("");var n=t-1-3,c=a.slice(e[0],n+1),r=a.slice(n+1,t+1);return a=c+" "+r}return a}(l),S=function(e){var a={RUB:"\u0420",USD:"$",EUR:"\u20ac"};for(var t in a)if(t===e)return a[t]}(n),D=x(b.length),C=x(f.length);return c.a.createElement("div",{className:"ticket-wrapper"},c.a.createElement("div",{className:"ticket-header"},c.a.createElement("div",{className:"ticket-header__price"},y," ",S),c.a.createElement("div",{className:"ticket-header__logo"},c.a.createElement("img",{src:m,alt:""}))),c.a.createElement("div",{className:"ticked-forward__container"},c.a.createElement("div",{className:"ticket-forward__header"},c.a.createElement("div",{className:"ticket-forward__header-route"},c.a.createElement("span",{className:"ticket-forward__header-route--span"},d," - ",p)),c.a.createElement("div",{className:"ticket-forward__header-length"},c.a.createElement("span",{className:"ticket-forward__header-length--span"},"\u0412 \u043f\u0443\u0442\u0438")),c.a.createElement("div",{className:"ticket-forward__header-stops"},c.a.createElement("span",{className:"ticket-forward__header-stops--span"},D))),c.a.createElement("div",{className:"ticket-forward__value"},c.a.createElement("div",{className:"ticket-forward__value-route"},c.a.createElement("span",{className:"ticket-forward__value-route--span"},"10:45-18:00")),c.a.createElement("div",{className:"ticket-forward__value-length"},c.a.createElement("span",{className:"ticket-forward__value-length--span"},N)),c.a.createElement("div",{className:"ticket-forward__value-stops"},c.a.createElement("span",{className:"ticket-forward__value-stops--span"},b.join(" "))))),c.a.createElement("div",{className:"ticked-back-container"},c.a.createElement("div",{className:"ticket-back__header"},c.a.createElement("div",{className:"ticket-back__header-route"},c.a.createElement("span",{className:"ticket-back__header-route--span"},v," - ",k)),c.a.createElement("div",{className:"ticket-back__header-length"},c.a.createElement("span",{className:"ticket-back__header-length--span"},"\u0412 \u043f\u0443\u0442\u0438")),c.a.createElement("div",{className:"ticket-back__header-stops"},c.a.createElement("span",{className:"ticket-back__header-stops--span"},C))),c.a.createElement("div",{className:"ticket-back__value"},c.a.createElement("div",{className:"ticket-back__value-route"},c.a.createElement("span",{className:"ticket-back__value-route--span"},"10:45-18:00")),c.a.createElement("div",{className:"ticket-back__value-length"},c.a.createElement("span",{className:"ticket-back__value-length--span"},g)),c.a.createElement("div",{className:"ticket-back__value-stops"},c.a.createElement("span",{className:"ticket-back__value-stops--span"},f.join(" "))))))}var C=t(19);function O(e){var a=e.displayTickets,t=e.currencyExchange,n=e.currencyDisplayed;return a.map((function(e){return c.a.createElement(D,{key:Object(C.uniqueId)(),ticket:e,currencyExchange:t,currencyDisplayed:n})}))}t(51);function T(){return c.a.createElement("div",{className:"wrapper"},"\u0411\u0438\u043b\u0435\u0442\u043e\u0432 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e")}t(52);function j(e){var a=e.currencyExchange,t=e.currencyDisplayed,n=e.handleChangeCurrency,r=a.date,s=a.usd,l=a.eur;var o=function(e){var a=e.getDate(),t=e.getMonth(),n=e.getFullYear();return a+" "+["\u042f\u043d\u0432\u0430\u0440\u044c","\u0424\u0435\u0432\u0440\u0430\u043b\u044c","\u041c\u0430\u0440\u0442","\u0410\u043f\u0440\u0435\u043b\u044c","\u041c\u0430\u0439","\u0418\u044e\u043d\u044c","\u0418\u044e\u043b\u044c","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c","\u041d\u043e\u044f\u0431\u0440\u044c","\u0414\u0435\u043a\u0430\u0431\u0440\u044c"][t]+" "+n}(new Date(r));return c.a.createElement("div",{className:"currencyPanel-wrapper"},c.a.createElement("span",{className:"currencyPanel-heading"},"\u041a\u0443\u0440\u0441 \u0426\u0411 \u043f\u043e \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044e \u043d\u0430: ",o),c.a.createElement("span",{className:"currencyPanel-text"},"USD: ",s),c.a.createElement("span",{className:"currencyPanel-text"},"EUR: ",l),c.a.createElement("span",{className:"currencyPanel-heading"},"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0432 \u0434\u0440\u0443\u0433\u043e\u0439 \u0432\u0430\u043b\u044e\u0442\u0435:"),c.a.createElement("div",{className:"currencyPanel__inputs-block"},c.a.createElement("div",{className:"radiobox"},c.a.createElement("input",{type:"radio",id:"RUB",className:"radiobox__input",onChange:n,checked:"RUB"===t}),c.a.createElement("label",{htmlFor:"RUB",className:"radiobox__label first-child"},"RUB")),c.a.createElement("div",{className:"radiobox"},c.a.createElement("input",{type:"radio",id:"USD",className:"radiobox__input",onChange:n,checked:"USD"===t}),c.a.createElement("label",{htmlFor:"USD",className:"radiobox__label"},"USD")),c.a.createElement("div",{className:"radiobox"},c.a.createElement("input",{type:"radio",id:"EUR",className:"radiobox__input",onChange:n,checked:"EUR"===t}),c.a.createElement("label",{htmlFor:"EUR",className:"radiobox__label last-child"},"EUR"))))}var B=function(e){Object(d.a)(t,e);var a=Object(u.a)(t);function t(){var e;Object(i.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=a.call.apply(a,[this].concat(c))).state={tickets:[],displayTickets:[],numberOfDisplayed:5,stops:{all:!0,noStops:!0,oneStop:!0,twoStops:!0,threeStops:!0},currencyExchange:{},currencyDisplayed:"RUB"},e.processingAllTickets=function(){_().then((function(a){e.getAllTickets(a)}))},e.getAllTickets=function(a){f(a).then((function(t){if(t){var n=t.stop,c=t.tickets;!1===n?(e.proccesingCurrenthPack(c),e.moveItemsToDisplayTickets(),e.getAllTickets(a)):!0===n&&(e.proccesingCurrenthPack(c),console.log("\u0421\u0442\u043e\u043f! \u041a\u043e\u043d\u0447\u0438\u043b\u0438\u0441\u044c \u0431\u0438\u043b\u0435\u0442\u044b. \u0412\u0441\u0435\u0433\u043e \u0431\u0438\u043b\u0435\u0442\u043e\u0432 \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043e: ",e.state.tickets.length))}else e.getAllTickets(a)}))},e.proccesingCurrenthPack=function(a){var t=e.state.tickets;console.log("\u041f\u043e\u043b\u0443\u0447\u0430\u0435\u043c \u043f\u0430\u0447\u043a\u0443. \u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0431\u0438\u043b\u0435\u0442\u043e\u0432: ",a.length);var n=[].concat(Object(o.a)(t),Object(o.a)(a));e.filterByStops(),N(n),e.setState({tickets:n})},e.getCurrency=function(){S().then((function(a){var t={date:a.data.Date,usd:a.data.Valute.USD.Value,eur:a.data.Valute.EUR.Value};e.setState({currencyExchange:t})}))},e.moveItemsToDisplayTickets=function(){for(var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.state.tickets,t=e.state.numberOfDisplayed,n=[],c=0;c<t;c++)a[c]&&n.push(a[c]);e.setState({displayTickets:n})},e.handleChangeNumberOfDisplated=function(a){var t=Number(a.currentTarget.id);e.setState({numberOfDisplayed:t},(function(){e.filterByStops()}))},e.handleChangeCurrency=function(a){var t=a.currentTarget.id;e.setState({currencyDisplayed:t},(function(){e.filterByStops()}))},e.handleSortByPrice=function(a){y(a),N(e.state.tickets),e.filterByStops()},e.handleSortByDuration=function(a){y(a),g(e.state.tickets),e.filterByStops()},e.handleFilter=function(a){var t=a.currentTarget.id,n=e.state,c=n.stops,r=n.tickets,s=c.all,o=c.noStops,i=c.oneStop,m=c.twoStops,u=c.threeStops,d=function(e){if("all"===e&&!1===s)return Object(l.a)({},c,{all:!0,noStops:!0,oneStop:!0,twoStops:!0,threeStops:!0});var a={noStops:Object(l.a)({},c,{noStops:!o,all:!1}),oneStop:Object(l.a)({},c,{oneStop:!i,all:!1}),twoStops:Object(l.a)({},c,{twoStops:!m,all:!1}),threeStops:Object(l.a)({},c,{threeStops:!u,all:!1}),all:Object(l.a)({},c,{all:!1,noStops:!1,oneStop:!1,twoStops:!1,threeStops:!1})};for(var t in a)if(t===e)return a[t]}(t);!1===d.all&&!0===d.noStops&&!0===d.oneStop&&!0===d.twoStops&&!0===d.threeStops&&(d=Object(l.a)({},c,{all:!0,noStops:!0,oneStop:!0,twoStops:!0,threeStops:!0})),e.setState({stops:d},(function(){g(r),e.filterByStops()}))},e.stopFilter=function(){var a=[],t=e.state.stops;for(var n in t)!0===t[n]&&(a=[].concat(Object(o.a)(a),[n]));var c={noStops:0,oneStop:1,twoStops:2,threeStops:3};return a=a.map((function(e){return c[e]}))},e.filterByStops=function(){var a=e.state.tickets,t=e.stopFilter();var n=a.filter((function(e){return function(e,a){for(var t=0;t<e.length;t++)if(e[t]===a)return!0;return!1}(t,e.segments[0].stops.length)}));e.moveItemsToDisplayTickets(n)},e}return Object(m.a)(t,[{key:"componentDidMount",value:function(){this.processingAllTickets(),this.getCurrency()}},{key:"render",value:function(){var e=this.state,a=e.displayTickets,t=e.stops,n=e.numberOfDisplayed,r=e.currencyExchange,s=e.currencyDisplayed,l=a.length?c.a.createElement(O,{displayTickets:a,currencyExchange:r,currencyDisplayed:s}):c.a.createElement(T,null);return c.a.createElement("div",{className:"app"},c.a.createElement("div",{className:"header"},c.a.createElement(p,null)),c.a.createElement("div",{className:"main"},c.a.createElement("div",{className:"left-aside"},c.a.createElement(h,{handleFilter:this.handleFilter,stopsData:t}),c.a.createElement(b,{handleChange:this.handleChangeNumberOfDisplated,numberOfDisplayed:n}),c.a.createElement(j,{currencyExchange:r,currencyDisplayed:s,handleChangeCurrency:this.handleChangeCurrency})),c.a.createElement("div",{className:"right-aside"},c.a.createElement(E,{handleSortByPrice:this.handleSortByPrice,handleSortByDuration:this.handleSortByDuration}),l)))}}]),t}(c.a.Component),U=function(e){Object(d.a)(t,e);var a=Object(u.a)(t);function t(e){var n;return Object(i.a)(this,t),(n=a.call(this,e)).state={hasError:!1},n}return Object(m.a)(t,[{key:"render",value:function(){return this.state.hasError?c.a.createElement("h1",null,"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a. \u0421\u043a\u043e\u0440\u043e \u043f\u043e\u0447\u0438\u043d\u0438\u043c"):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),t}(c.a.Component);s.a.render(c.a.createElement(U,null,c.a.createElement(B,null)),document.getElementById("root"))}},[[20,1,2]]]);
//# sourceMappingURL=main.1fe10128.chunk.js.map