(this["webpackJsonpapp-timers"]=this["webpackJsonpapp-timers"]||[]).push([[0],{21:function(e,a,t){e.exports=t(57)},26:function(e,a,t){},27:function(e,a,t){},28:function(e,a,t){},29:function(e,a,t){},30:function(e,a,t){},31:function(e,a,t){},51:function(e,a,t){},54:function(e,a,t){},55:function(e,a,t){},56:function(e,a,t){},57:function(e,a,t){"use strict";t.r(a);var n=t(0),c=t.n(n),r=t(19),s=t.n(r),l=(t(26),t(2)),i=t(9),o=t(3),m=t(4),d=t(5),u=t(6);t(27),t(28);function p(){return c.a.createElement("div",{className:"header-wrapper"},c.a.createElement("div",{className:"logo"}))}t(29);function h(e){var a=e.handleChangeFilterStops,t=e.stopsData;return c.a.createElement("form",{className:"form-checkbox"},c.a.createElement("div",{className:"inputs-block"},c.a.createElement("div",{className:"checkbox-heading"},"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"),c.a.createElement("div",{className:"checkbox"},c.a.createElement("label",{className:"checkbox__label"},c.a.createElement("input",{className:"checkbox__input",type:"checkbox",id:"all",onChange:a,checked:t.all}),c.a.createElement("span",{className:"checkbox__box"}),"\u0412\u0441\u0435")),c.a.createElement("div",{className:"checkbox"},c.a.createElement("label",{className:"checkbox__label"},c.a.createElement("input",{className:"checkbox__input",type:"checkbox",id:"noStops",onChange:a,checked:t.noStops}),c.a.createElement("span",{className:"checkbox__box"}),"\u0411\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a")),c.a.createElement("div",{className:"checkbox"},c.a.createElement("label",{className:"checkbox__label"},c.a.createElement("input",{className:"checkbox__input",type:"checkbox",id:"oneStop",onChange:a,checked:t.oneStop}),c.a.createElement("span",{className:"checkbox__box"}),"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430")),c.a.createElement("div",{className:"checkbox"},c.a.createElement("label",{className:"checkbox__label"},c.a.createElement("input",{className:"checkbox__input",type:"checkbox",id:"twoStops",onChange:a,checked:t.twoStops}),c.a.createElement("span",{className:"checkbox__box"}),"2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438")),c.a.createElement("div",{className:"checkbox"},c.a.createElement("label",{className:"checkbox__label"},c.a.createElement("input",{className:"checkbox__input",type:"checkbox",id:"threeStops",onChange:a,checked:t.threeStops}),c.a.createElement("span",{className:"checkbox__box"}),"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438"))))}t(30);function b(e){var a=e.handleChange,t=e.numberOfDisplayed,n=e.totalTickets;return c.a.createElement("div",{className:"number-panel-wrapper"},c.a.createElement("h1",{className:"title"},"\u0412\u0441\u0435\u0433\u043e \u043f\u043e\u043b\u0443\u0447\u0435\u043d\u043e \u0438 \u043e\u0431\u0440\u0430\u0431\u043e\u0442\u0430\u043d\u043e \u0431\u0438\u043b\u0435\u0442\u043e\u0432:",c.a.createElement("span",{className:"number-panel-text"},n)),c.a.createElement("h1",{className:"title"},"\u041a\u043e\u043b\u0438\u0447\u0435\u0441\u0442\u0432\u043e \u0431\u0438\u043b\u0435\u0442\u043e\u0432 \u0434\u043b\u044f \u043f\u043e\u043a\u0430\u0437\u0430: "),c.a.createElement("div",{className:"number-panel__inputs-block"},c.a.createElement("div",{className:"radiobox"},c.a.createElement("input",{type:"radio",name:"numberOfTickets",id:"5",className:"radiobox__input",onChange:a,checked:5===t}),c.a.createElement("label",{htmlFor:"5",className:"radiobox__label first-child"},"5")),c.a.createElement("div",{className:"radiobox"},c.a.createElement("input",{type:"radio",name:"numberOfTickets",id:"10",className:"radiobox__input",onChange:a,checked:10===t}),c.a.createElement("label",{htmlFor:"10",className:"radiobox__label"},"10")),c.a.createElement("div",{className:"radiobox"},c.a.createElement("input",{type:"radio",name:"numberOfTickets",id:"15",className:"radiobox__input",onChange:a,checked:15===t}),c.a.createElement("label",{htmlFor:"15",className:"radiobox__label"},"15")),c.a.createElement("div",{className:"radiobox"},c.a.createElement("input",{type:"radio",name:"numberOfTickets",id:"50",className:"radiobox__input",onChange:a,checked:50===t}),c.a.createElement("label",{htmlFor:"50",className:"radiobox__label last-child"},"50"))))}t(31);function E(e){var a=e.handleChange,t=e.sortBy;return c.a.createElement("div",{className:"sorting-panel__inputs-block"},c.a.createElement("div",{className:"radiobox"},c.a.createElement("input",{type:"radio",name:"sortByCost",id:"cost",className:"radiobox__input",onChange:a,checked:"cost"===t}),c.a.createElement("label",{htmlFor:"cost",className:"radiobox__label first-child"},c.a.createElement("span",null,"\u0421\u0430\u043c\u044b\u0439 \u0434\u0435\u0448\u0435\u0432\u044b\u0439"))),c.a.createElement("div",{className:"radiobox"},c.a.createElement("input",{type:"radio",name:"sortByDuration",id:"duration",className:"radiobox__input",onChange:a,checked:"duration"===t}),c.a.createElement("label",{htmlFor:"duration",className:"radiobox__label last-child"},"\u0421\u0430\u043c\u044b\u0439 \u0431\u044b\u0441\u0442\u0440\u044b\u0439")))}var _=t(7),k=t.n(_),v=t(8),f=t.n(v),N=function(){return f.a.get("https://front-test.beta.aviasales.ru/search").then((function(e){return e.data.searchId})).catch((function(e){return console.log(e)}))},y=function(e){var a="https://front-test.beta.aviasales.ru/tickets?searchId="+e;return f.a.get(a).then((function(e){return e.data})).catch((function(e){}))};function g(e){return e.sort((function(e,a){var t=e.price,n=a.price;return t<n?-1:t>n?1:0}))}function x(e){return e.sort((function(e,a){var t=e.segments[0].duration+e.segments[1].duration,n=a.segments[0].duration+a.segments[1].duration;return t<n?-1:t>n?1:0}))}function S(){return f.a.get("https://www.cbr-xml-daily.ru/daily_json.js")}var D=function(e){var a={1:"1 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0430",2:"2 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438",3:"3 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043a\u0438",0:"\u0431\u0435\u0437 \u043f\u0435\u0440\u0435\u0441\u0430\u0434\u043e\u043a"};for(var t in a)if(Number(t)===e)return a[t]};function C(e){var a=Math.floor(e/60),t=e%60;return"".concat(a,"\u0447 ").concat(t,"\u043c ")}t(51);function w(e){var a=e.ticket,t=e.currencyData,n=e.currencyDisplayed,r=a.carrier,s=a.segments,l=a.price,i=t.usd,o=t.eur,m="http://pics.avs.io/99/36/".concat(r,".png"),d=s[0],u=d.origin,p=d.destination,h=d.duration,b=d.stops,E=s[1],_=E.origin,k=E.destination,v=E.duration,f=E.stops;"USD"===n?l=Math.round(l/i):"EUR"===n&&(l=Math.round(l/o));var N=C(h),y=C(v),g=function(e){var a=e.toString(),t=a.length;if(t>3){a.split("");var n=t-1-3,c=a.slice(e[0],n+1),r=a.slice(n+1,t+1);return a=c+" "+r}return a}(l),x=function(e){var a={RUB:"\u0420",USD:"$",EUR:"\u20ac"};for(var t in a)if(t===e)return a[t]}(n),S=D(b.length),w=D(f.length);return c.a.createElement("div",{className:"ticket-wrapper"},c.a.createElement("div",{className:"ticket-header"},c.a.createElement("div",{className:"ticket-header__price"},g," ",x),c.a.createElement("div",{className:"ticket-header__logo"},c.a.createElement("img",{src:m,alt:""}))),c.a.createElement("div",{className:"ticked-forward__container"},c.a.createElement("div",{className:"ticket-forward__header"},c.a.createElement("div",{className:"ticket-forward__header-route"},c.a.createElement("span",{className:"ticket-forward__header-route--span"},u," - ",p)),c.a.createElement("div",{className:"ticket-forward__header-length"},c.a.createElement("span",{className:"ticket-forward__header-length--span"},"\u0412 \u043f\u0443\u0442\u0438")),c.a.createElement("div",{className:"ticket-forward__header-stops"},c.a.createElement("span",{className:"ticket-forward__header-stops--span"},S))),c.a.createElement("div",{className:"ticket-forward__value"},c.a.createElement("div",{className:"ticket-forward__value-route"},c.a.createElement("span",{className:"ticket-forward__value-route--span"},"10:45-18:00")),c.a.createElement("div",{className:"ticket-forward__value-length"},c.a.createElement("span",{className:"ticket-forward__value-length--span"},N)),c.a.createElement("div",{className:"ticket-forward__value-stops"},c.a.createElement("span",{className:"ticket-forward__value-stops--span"},b.join(" "))))),c.a.createElement("div",{className:"ticked-back-container"},c.a.createElement("div",{className:"ticket-back__header"},c.a.createElement("div",{className:"ticket-back__header-route"},c.a.createElement("span",{className:"ticket-back__header-route--span"},k," - ",_)),c.a.createElement("div",{className:"ticket-back__header-length"},c.a.createElement("span",{className:"ticket-back__header-length--span"},"\u0412 \u043f\u0443\u0442\u0438")),c.a.createElement("div",{className:"ticket-back__header-stops"},c.a.createElement("span",{className:"ticket-back__header-stops--span"},w))),c.a.createElement("div",{className:"ticket-back__value"},c.a.createElement("div",{className:"ticket-back__value-route"},c.a.createElement("span",{className:"ticket-back__value-route--span"},"10:45-18:00")),c.a.createElement("div",{className:"ticket-back__value-length"},c.a.createElement("span",{className:"ticket-back__value-length--span"},y)),c.a.createElement("div",{className:"ticket-back__value-stops"},c.a.createElement("span",{className:"ticket-back__value-stops--span"},f.join(" "))))))}var T=t(20);function O(e){var a=e.displayTickets,t=e.currencyData,n=e.currencyDisplayed;return a.map((function(e){return c.a.createElement(w,{key:Object(T.uniqueId)(),ticket:e,currencyData:t,currencyDisplayed:n})}))}O.proTypes={displayTickets:k.a.array,currencyData:k.a.object,currencyDisplayed:k.a.string};t(54);function U(){return c.a.createElement("div",{className:"wrapper"},"\u0411\u0438\u043b\u0435\u0442\u043e\u0432 \u043d\u0435 \u043d\u0430\u0439\u0434\u0435\u043d\u043e")}t(55);function j(e){var a=e.currencyData,t=e.currencyDisplayed,n=e.handleChangeCurrency,r=a.date,s=a.usd,l=a.eur,i=function(e){var a=e.getDate(),t=e.getMonth(),n=e.getFullYear();return a+" "+["\u042f\u043d\u0432\u0430\u0440\u044c","\u0424\u0435\u0432\u0440\u0430\u043b\u044c","\u041c\u0430\u0440\u0442","\u0410\u043f\u0440\u0435\u043b\u044c","\u041c\u0430\u0439","\u0418\u044e\u043d\u044c","\u0418\u044e\u043b\u044c","\u0410\u0432\u0433\u0443\u0441\u0442","\u0421\u0435\u043d\u0442\u044f\u0431\u0440\u044c","\u041d\u043e\u044f\u0431\u0440\u044c","\u0414\u0435\u043a\u0430\u0431\u0440\u044c"][t]+" "+n}(new Date(r)),o=Number(s).toFixed(2),m=Number(l).toFixed(2);return c.a.createElement("div",{className:"currencyPanel-wrapper"},c.a.createElement("div",{className:"currencyPanel-heading"},"\u041a\u0443\u0440\u0441 \u0426\u0411 \u043f\u043e \u0441\u043e\u0441\u0442\u043e\u044f\u043d\u0438\u044e \u043d\u0430:",c.a.createElement("br",null)," ",i),c.a.createElement("div",{className:"currencyPanel-text"},"USD: ",o),c.a.createElement("div",{className:"currencyPanel-text"},"EUR: ",m),c.a.createElement("div",{className:"currencyPanel-heading"},"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0432 \u0434\u0440\u0443\u0433\u043e\u0439 \u0432\u0430\u043b\u044e\u0442\u0435:"),c.a.createElement("div",{className:"currencyPanel__inputs-block"},c.a.createElement("div",{className:"radiobox"},c.a.createElement("input",{type:"radio",id:"RUB",className:"radiobox__input",onChange:n,checked:"RUB"===t}),c.a.createElement("label",{htmlFor:"RUB",className:"radiobox__label first-child"},"RUB")),c.a.createElement("div",{className:"radiobox"},c.a.createElement("input",{type:"radio",id:"USD",className:"radiobox__input",onChange:n,checked:"USD"===t}),c.a.createElement("label",{htmlFor:"USD",className:"radiobox__label"},"USD")),c.a.createElement("div",{className:"radiobox"},c.a.createElement("input",{type:"radio",id:"EUR",className:"radiobox__input",onChange:n,checked:"EUR"===t}),c.a.createElement("label",{htmlFor:"EUR",className:"radiobox__label last-child"},"EUR"))))}t(56);function F(){return c.a.createElement("div",{className:"currencyPanel-wrapper"},c.a.createElement("div",{className:"currencyPanel-heading"},"\u0422\u0435\u043a\u0443\u0449\u0438\u0439 \u043a\u0443\u0440\u0441 \u0426\u0411 :",c.a.createElement("br",null)," ",c.a.createElement("span",{className:"noData"},"\u041d\u0415\u0422 \u0414\u0410\u041d\u041d\u042b\u0425")),c.a.createElement("div",{className:"currencyPanel-heading"},"\u041f\u043e\u043a\u0430\u0437\u0430\u0442\u044c \u0441\u0442\u043e\u0438\u043c\u043e\u0441\u0442\u044c \u0432 \u0434\u0440\u0443\u0433\u043e\u0439 \u0432\u0430\u043b\u044e\u0442\u0435:"),c.a.createElement("div",{className:"currencyPanel__inputs-block"},c.a.createElement("div",{className:"radiobox"},c.a.createElement("input",{type:"radio",id:"RUB",className:"radiobox__input",checked:!0,disabled:!0}),c.a.createElement("label",{htmlFor:"RUB",className:"radiobox__label first-child"},"RUB")),c.a.createElement("div",{className:"radiobox"},c.a.createElement("input",{type:"radio",id:"USD",className:"radiobox__input",checked:!1,disabled:!0}),c.a.createElement("label",{htmlFor:"USD",className:"radiobox__label"},"USD")),c.a.createElement("div",{className:"radiobox"},c.a.createElement("input",{type:"radio",id:"EUR",className:"radiobox__input",checked:!1,disabled:!0}),c.a.createElement("label",{htmlFor:"EUR",className:"radiobox__label last-child"},"EUR"))))}var B=function(e){Object(u.a)(t,e);var a=Object(d.a)(t);function t(){var e;Object(o.a)(this,t);for(var n=arguments.length,c=new Array(n),r=0;r<n;r++)c[r]=arguments[r];return(e=a.call.apply(a,[this].concat(c))).state={tickets:[],displayTickets:[],numberOfDisplayed:5,stops:{all:!0,noStops:!0,oneStop:!0,twoStops:!0,threeStops:!0},sortBy:"cost",currencyData:{},currencyDisplayed:"RUB"},e.processingAllTickets=function(){N().then((function(a){e.getAllTickets(a)}))},e.getAllTickets=function(a){y(a).then((function(t){if(t){var n=t.stop,c=t.tickets;!1===n?(e.proccesingCurrenthPack(c),e.moveItemsToDisplayTickets(),e.getAllTickets(a)):!0===n&&e.proccesingCurrenthPack(c)}else e.getAllTickets(a)}))},e.proccesingCurrenthPack=function(a){var t=e.state.tickets;e.setState({tickets:[].concat(Object(i.a)(t),Object(i.a)(a))},(function(){return e.updateTickets()}))},e.getCurrency=function(){S().then((function(a){var t={date:a.data.Date,usd:a.data.Valute.USD.Value,eur:a.data.Valute.EUR.Value};e.setState({currencyData:t})}))},e.handleChangeNumberOfDisplated=function(a){var t=Number(a.currentTarget.id);e.setState({numberOfDisplayed:t},(function(){e.updateTickets()}))},e.handleChangeCurrency=function(a){var t=a.currentTarget.id;e.setState({currencyDisplayed:t},(function(){e.updateTickets()}))},e.handleChangeSort=function(a){var t=a.currentTarget.id;e.setState({sortBy:t},(function(){return e.sortTickets()}))},e.sortTickets=function(){var a=e.state,t=a.tickets;"cost"===a.sortBy?g(t):x(t),e.filterByStops()},e.updateTickets=function(){e.sortTickets(),e.filterByStops()},e.handleChangeFilterStops=function(a){var t=a.currentTarget.id,n=e.state.stops,c=n.all,r=n.noStops,s=n.oneStop,i=n.twoStops,o=n.threeStops,m=function(e){if("all"===e&&!1===c)return Object(l.a)({},n,{all:!0,noStops:!0,oneStop:!0,twoStops:!0,threeStops:!0});var a={noStops:Object(l.a)({},n,{noStops:!r,all:!1}),oneStop:Object(l.a)({},n,{oneStop:!s,all:!1}),twoStops:Object(l.a)({},n,{twoStops:!i,all:!1}),threeStops:Object(l.a)({},n,{threeStops:!o,all:!1}),all:Object(l.a)({},n,{all:!1,noStops:!1,oneStop:!1,twoStops:!1,threeStops:!1})};for(var t in a)if(t===e)return a[t]}(t);!1===m.all&&!0===m.noStops&&!0===m.oneStop&&!0===m.twoStops&&!0===m.threeStops&&(m=Object(l.a)({},n,{all:!0,noStops:!0,oneStop:!0,twoStops:!0,threeStops:!0})),e.setState({stops:m},(function(){return e.updateTickets()}))},e.getArrayStopsFilter=function(){var a=[],t=e.state.stops;for(var n in t)!0===t[n]&&(a=[].concat(Object(i.a)(a),[n]));var c={noStops:0,oneStop:1,twoStops:2,threeStops:3};return a.map((function(e){return c[e]}))},e.filterByStops=function(){var a=e.state.tickets,t=e.getArrayStopsFilter();var n=a.filter((function(e){return function(e,a){for(var t=0;t<e.length;t++)if(e[t]===a)return!0;return!1}(t,e.segments[0].stops.length)}));e.moveItemsToDisplayTickets(n)},e.moveItemsToDisplayTickets=function(){for(var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.state.tickets,t=e.state.numberOfDisplayed,n=[],c=0;c<t;c++)a[c]&&n.push(a[c]);e.setState({displayTickets:n})},e}return Object(m.a)(t,[{key:"componentDidMount",value:function(){this.processingAllTickets(),this.getCurrency()}},{key:"render",value:function(){var e=this.state,a=e.tickets,t=e.displayTickets,n=e.stops,r=e.sortBy,s=e.numberOfDisplayed,l=e.currencyData,i=e.currencyDisplayed,o=a.length,m=t.length?c.a.createElement(O,{displayTickets:t,currencyData:l,currencyDisplayed:i}):c.a.createElement(U,null),d=l.date?c.a.createElement(j,{currencyData:l,currencyDisplayed:i,handleChangeCurrency:this.handleChangeCurrency}):c.a.createElement(F,null);return c.a.createElement("div",{className:"app"},c.a.createElement("div",{className:"header"},c.a.createElement(p,null)),c.a.createElement("div",{className:"main"},c.a.createElement("div",{className:"left-aside"},c.a.createElement(h,{handleChangeFilterStops:this.handleChangeFilterStops,stopsData:n}),c.a.createElement(b,{handleChange:this.handleChangeNumberOfDisplated,numberOfDisplayed:s,totalTickets:o}),d),c.a.createElement("div",{className:"right-aside"},c.a.createElement(E,{sortBy:r,handleChange:this.handleChangeSort}),m)))}}]),t}(c.a.Component),R=function(e){Object(u.a)(t,e);var a=Object(d.a)(t);function t(e){var n;return Object(o.a)(this,t),(n=a.call(this,e)).state={hasError:!1},n}return Object(m.a)(t,[{key:"render",value:function(){return this.state.hasError?c.a.createElement("h1",null,"\u0427\u0442\u043e-\u0442\u043e \u043f\u043e\u0448\u043b\u043e \u043d\u0435 \u0442\u0430\u043a. \u0421\u043a\u043e\u0440\u043e \u043f\u043e\u0447\u0438\u043d\u0438\u043c"):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),t}(c.a.Component);s.a.render(c.a.createElement(R,null,c.a.createElement(B,null)),document.getElementById("root"))}},[[21,1,2]]]);
//# sourceMappingURL=main.cc4efbd9.chunk.js.map