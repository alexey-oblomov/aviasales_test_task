{"version":3,"sources":["components/header/header.jsx","components/filter_transfers/flter_transfers.jsx","components/ticket/ticket.jsx","components/main_window/main_window.jsx","utils/request.js","utils/paths.js","app.js","components/errorBoundary/errorBoundary.jsx","index.js"],"names":["Header","className","FilterStops","props","handleFilter","stopsData","type","id","onChange","checked","all","noStops","oneStop","twoStops","threeStops","Ticket","ticket","carrier","price","segments","carrierUrl","segmentForward","originForward","origin","destinationForward","destination","durationForward","duration","stopsForward","stops","segmentBack","originBack","destinationBack","durationBack","stopsBack","viewPrice","string","toString","length","split","idx","firstItems","slice","lastItems","displayPrice","src","alt","join","MainWindow","displayTickets","handleSortByPrice","handleSortByDuration","tickets","map","item","key","uniqueId","onClick","getSearchId","axios","get","then","response","data","searchId","catch","error","console","log","getOnePackTickets","getTicketsUrl","sortByPrice","array","sort","ticketA","ticketB","priceA","priceB","sortByDuration","durationA","durationB","toggleClassBtnActive","event","currentTarget","classList","contains","btns","document","querySelectorAll","i","toggle","App","state","numberOfDisplayed","processingAllTickets","getAllTickets","stop","proccesingCurrenthPack","moveItemsToDisplayTickets","oldValue","newValue","filterByStops","setState","push","theStop","newStops","stopsStatus","stopsStateChange","stopFilter","arrayForFilter","currentStopsState","stopsCount","checkArr","result","filter","arr","elem","this","React","Component","ErrorBoundary","hasError","children","ReactDOM","render","getElementById"],"mappings":"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","file":"static/js/main.1fc517a6.chunk.js","sourcesContent":["import React from 'react';\r\nimport './header.css';\r\n\r\nexport default function Header() {\r\n  return (\r\n    <div className=\"header-wrapper\">\r\n      <div className=\"logo\"></div>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport './filter_transfers.css';\r\n\r\nexport default function FilterStops(props) {\r\n  const { handleFilter, stopsData } = props;\r\n  return (\r\n    <form className=\"form-checkbox\">\r\n      <div className=\"inputs-block\">\r\n        <div className=\"checkbox-heading\">Количество пересадок</div>\r\n\r\n        <div className=\"checkbox\">\r\n          <label className=\"checkbox__label\">\r\n            <input\r\n              className=\"checkbox__input\"\r\n              type=\"checkbox\"\r\n              id=\"all\"\r\n              onChange={handleFilter}\r\n              checked={stopsData.all}\r\n            />\r\n            <span className=\"checkbox__box\"></span>\r\n            Все\r\n          </label>\r\n        </div>\r\n\r\n        <div className=\"checkbox\">\r\n          <label className=\"checkbox__label\">\r\n            <input\r\n              className=\"checkbox__input\"\r\n              type=\"checkbox\"\r\n              id=\"noStops\"\r\n              onChange={handleFilter}\r\n              checked={stopsData.noStops}\r\n            />\r\n            <span className=\"checkbox__box\"></span>\r\n            Без пересадок\r\n          </label>\r\n        </div>\r\n\r\n        <div className=\"checkbox\">\r\n          <label className=\"checkbox__label\">\r\n            <input\r\n              className=\"checkbox__input\"\r\n              type=\"checkbox\"\r\n              id=\"oneStop\"\r\n              onChange={handleFilter}\r\n              checked={stopsData.oneStop}\r\n            />\r\n            <span className=\"checkbox__box\"></span>1 пересадка\r\n          </label>\r\n        </div>\r\n\r\n        <div className=\"checkbox\">\r\n          <label className=\"checkbox__label\">\r\n            <input\r\n              className=\"checkbox__input\"\r\n              type=\"checkbox\"\r\n              id=\"twoStops\"\r\n              onChange={handleFilter}\r\n              checked={stopsData.twoStops}\r\n            />\r\n            <span className=\"checkbox__box\"></span>2 пересадки\r\n          </label>\r\n        </div>\r\n\r\n        <div className=\"checkbox\">\r\n          <label className=\"checkbox__label\">\r\n            <input\r\n              className=\"checkbox__input\"\r\n              type=\"checkbox\"\r\n              id=\"threeStops\"\r\n              onChange={handleFilter}\r\n              checked={stopsData.threeStops}\r\n            />\r\n            <span className=\"checkbox__box\"></span>3 пересадки\r\n          </label>\r\n        </div>\r\n      </div>\r\n    </form>\r\n  );\r\n}\r\n","import React from 'react';\r\n\r\nimport './ticket.css';\r\n\r\nexport function Ticket(props) {\r\n  const { ticket } = props;\r\n  if (!ticket) {\r\n    return (\r\n      <div> Билеты не найдены</div>\r\n    );\r\n  }\r\n  const { carrier, price, segments } = ticket;\r\n  const carrierUrl = `http://pics.avs.io/99/36/${carrier}.png`;\r\n  const segmentForward = segments[0];\r\n  const {\r\n    origin: originForward,\r\n    destination: destinationForward,\r\n    duration: durationForward,\r\n    stops: stopsForward,\r\n  } = segmentForward;\r\n  const segmentBack = segments[1];\r\n  const {\r\n    origin: originBack,\r\n    destination: destinationBack,\r\n    duration: durationBack,\r\n    stops: stopsBack,\r\n  } = segmentBack;\r\n\r\n  const displayPrice = (price) => {\r\n    let string = price.toString();\r\n    const length = string.length;\r\n    if (length > 3) {\r\n      string.split('');\r\n      const idx = length - 1 - 3;\r\n      const firstItems = string.slice(price[0], idx + 1);\r\n      const lastItems = string.slice(idx + 1, length + 1);\r\n      string = firstItems + ' ' + lastItems;\r\n      return string;\r\n    }\r\n    return string;\r\n  };\r\n\r\n  const viewPrice = displayPrice(price);\r\n  return (\r\n    <div className=\"ticket-wrapper\">\r\n      <div className=\"ticket-header\">\r\n        <div className=\"ticket-header__price\">{viewPrice} Р</div>\r\n        <div className=\"ticket-header__logo\">\r\n          <img src={carrierUrl} alt=\"\"></img>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"ticked-forward__container\">\r\n        <div className=\"ticket-forward__header\">\r\n          <div className=\"ticket-forward__header-route\">\r\n            <span className=\"ticket-forward__header-route--span\">\r\n              {originForward} - {destinationForward}\r\n            </span>\r\n          </div>\r\n          <div className=\"ticket-forward__header-length\">\r\n            <span className=\"ticket-forward__header-length--span\">В пути</span>\r\n          </div>\r\n          <div className=\"ticket-forward__header-stops\">\r\n            <span className=\"ticket-forward__header-stops--span\">\r\n              Пересадки {stopsForward.length}\r\n            </span>\r\n          </div>\r\n        </div>\r\n        <div className=\"ticket-forward__value\">\r\n          <div className=\"ticket-forward__value-route\">\r\n            <span className=\"ticket-forward__value-route--span\">10:45-18:00</span>\r\n          </div>\r\n          <div className=\"ticket-forward__value-length\">\r\n            <span className=\"ticket-forward__value-length--span\">{durationForward}</span>\r\n          </div>\r\n          <div className=\"ticket-forward__value-stops\">\r\n            <span className=\"ticket-forward__value-stops--span\">{stopsForward.join(' ')}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"ticked-back-container\">\r\n        <div className=\"ticket-back__header\">\r\n          <div className=\"ticket-back__header-route\">\r\n            <span className=\"ticket-back__header-route--span\">\r\n            {destinationBack} - {originBack}\r\n            </span>\r\n          </div>\r\n          <div className=\"ticket-back__header-length\">\r\n            <span className=\"ticket-back__header-length--span\">В пути</span>\r\n          </div>\r\n          <div className=\"ticket-back__header-stops\">\r\n            <span className=\"ticket-back__header-stops--span\">Пересадки {stopsBack.length}</span>\r\n          </div>\r\n        </div>\r\n        <div className=\"ticket-back__value\">\r\n          <div className=\"ticket-back__value-route\">\r\n            <span className=\"ticket-back__value-route--span\">10:45-18:00</span>\r\n          </div>\r\n          <div className=\"ticket-back__value-length\">\r\n            <span className=\"ticket-back__value-length--span\">{durationBack}</span>\r\n          </div>\r\n          <div className=\"ticket-back__value-stops\">\r\n            <span className=\"ticket-back__value-stops--span\">{stopsBack.join(' ')}</span>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import React from 'react';\r\nimport { uniqueId } from 'lodash';\r\nimport './main_window.css';\r\nimport { Ticket } from '../ticket/ticket';\r\n\r\nexport default function MainWindow(props) {\r\n  const { displayTickets, handleSortByPrice, handleSortByDuration } = props;\r\n  let listTickets;\r\n  if (displayTickets.length === 0) {\r\n    listTickets = <div>Билетов не найдено</div>;\r\n  } else {\r\n    listTickets = displayTickets.map((item) => {\r\n      return <Ticket key={uniqueId()} ticket={item} />;\r\n    });\r\n  }\r\n\r\n  const tickets = listTickets ? listTickets : null;\r\n  return (\r\n    <div className=\"main-window__wrapper\">\r\n      <div className=\"main-window__btn-container\">\r\n        <div>\r\n          <button className=\"btn btn-left btn-active\" onClick={handleSortByPrice}>\r\n            Самый дешевый\r\n          </button>\r\n        </div>\r\n        <div>\r\n          <button className=\"btn btn-right\" onClick={handleSortByDuration}>\r\n            Самый быстрый\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <div className=\"main-window__tickets-container\">{tickets}</div>\r\n    </div>\r\n  );\r\n}\r\n","import axios from 'axios';\r\nimport { getSearchIdUrl as baseUrlSearchId } from './paths.js';\r\nimport { getTicketsUrl as baseUrlForTickets } from './paths.js';\r\n\r\nexport const getSearchId = () =>\r\n  axios\r\n    .get(baseUrlSearchId)\r\n    .then((response) => {\r\n      return response.data.searchId;\r\n    })\r\n    .catch((error) => console.log(error));\r\n\r\nexport const getOnePackTickets = (id) => {\r\n  const getTicketsUrl = baseUrlForTickets + id;\r\n  let response = axios\r\n    .get(getTicketsUrl)\r\n    .then((response) => {\r\n      return response.data;\r\n    })\r\n    .catch((error) => {\r\n      return;\r\n    });\r\n  return response;\r\n};\r\n\r\nexport function sortByPrice(array) {\r\n  const result = array.sort(function (ticketA, ticketB) {\r\n    const priceA = ticketA['price'],\r\n      priceB = ticketB['price'];\r\n    if (priceA < priceB) {\r\n      return -1;\r\n    } else if (priceA > priceB) {\r\n      return 1;\r\n    }\r\n    return 0;\r\n  });\r\n  return result;\r\n}\r\n\r\n// + ticketA['segments'][1]['duration']\r\n// + ticketB['segments'][1]['duration']\r\n\r\nexport function sortByDuration(array) {\r\n  const result = array.sort(function (ticketA, ticketB) {\r\n    const durationA = ticketA['segments'][0]['duration'] + ticketA['segments'][1]['duration'],\r\n      durationB = ticketB['segments'][0]['duration'] + ticketB['segments'][1]['duration'];\r\n    if (durationA < durationB) {\r\n      return -1;\r\n    } else if (durationA > durationB) {\r\n      return 1;\r\n    }\r\n    return 0;\r\n  });\r\n  return result;\r\n}\r\n\r\nexport function toggleClassBtnActive(event) {\r\n  if (!event.currentTarget.classList.contains('btn-active')) {\r\n    const btns = document.querySelectorAll('button');\r\n    for (var i = 0; i < btns.length; i++) {\r\n      btns[i].classList.toggle('btn-active');\r\n    }\r\n  }\r\n}\r\n","export const getSearchIdUrl = 'https://front-test.beta.aviasales.ru/search'; // получение searchId\r\nexport const getTicketsUrl = 'https://front-test.beta.aviasales.ru/tickets?searchId='; //получение пачки билетов","import React from 'react';\r\nimport './app.css';\r\nimport Header from './components/header/header';\r\nimport FilterByStopstops from './components/filter_transfers/flter_transfers';\r\nimport MainWindow from './components/main_window/main_window';\r\n\r\nimport {\r\n  getSearchId,\r\n  getOnePackTickets,\r\n  sortByPrice,\r\n  sortByDuration,\r\n  toggleClassBtnActive,\r\n} from './utils/request';\r\n\r\nclass App extends React.Component {\r\n  state = {\r\n    tickets: [],\r\n    displayTickets: [],\r\n    numberOfDisplayed: 5,\r\n    stops: {\r\n      all: true,\r\n      noStops: true,\r\n      oneStop: true,\r\n      twoStops: true,\r\n      threeStops: true,\r\n    },\r\n  };\r\n\r\n  componentDidMount() {\r\n    this.processingAllTickets();\r\n  }\r\n\r\n  processingAllTickets = () => {\r\n    getSearchId().then((id) => {\r\n      this.getAllTickets(id);\r\n    });\r\n  };\r\n\r\n  getAllTickets = (id) => {\r\n    getOnePackTickets(id).then((response) => {\r\n      if (!response) {\r\n        this.getAllTickets(id);\r\n      } else {\r\n        const { stop, tickets } = response;\r\n        if (stop === false) {\r\n          this.proccesingCurrenthPack(tickets);\r\n          this.moveItemsToDisplayTickets();\r\n          this.getAllTickets(id);\r\n        } else if (stop === true) {\r\n          this.proccesingCurrenthPack(tickets);\r\n          console.log(\r\n            'Стоп! Кончились билеты. Всего билетов получено: ',\r\n            this.state.tickets.length\r\n          );\r\n        }\r\n      }\r\n    });\r\n  };\r\n\r\n  proccesingCurrenthPack = (tickets) => {\r\n    const oldValue = this.state.tickets;\r\n    console.log('Получаем пачку. Количество билетов: ', tickets.length);\r\n    const newValue = [...oldValue, ...tickets];\r\n    this.filterByStops();\r\n    sortByPrice(newValue);\r\n    this.setState({\r\n      tickets: newValue,\r\n    });\r\n  };\r\n\r\n  moveItemsToDisplayTickets = (array = this.state.tickets) => {\r\n    const { numberOfDisplayed } = this.state;\r\n    let newValue = [];\r\n    for (let i = 0; i < numberOfDisplayed; i++) {\r\n      newValue.push(array[i]);\r\n    }\r\n    this.setState({\r\n      displayTickets: newValue,\r\n    });\r\n  };\r\n\r\n  handleSortByPrice = (event) => {\r\n    toggleClassBtnActive(event);\r\n    const { tickets } = this.state;\r\n    sortByPrice(tickets);\r\n    this.filterByStops();\r\n  };\r\n\r\n  handleSortByDuration = (event) => {\r\n    toggleClassBtnActive(event);\r\n    const { tickets } = this.state;\r\n    sortByDuration(tickets);\r\n    this.filterByStops();\r\n  };\r\n\r\n  handleFilter = (event) => {\r\n    const theStop = event.currentTarget.id;\r\n    const { stops } = this.state;\r\n    const { all, noStops, oneStop, twoStops, threeStops } = stops;\r\n\r\n    const stopsStateChange = (theStop) => {\r\n      if (theStop === 'all' && all === false) {\r\n        return {\r\n          ...stops,\r\n          all: true,\r\n          noStops: true,\r\n          oneStop: true,\r\n          twoStops: true,\r\n          threeStops: true,\r\n        };\r\n      }\r\n\r\n      const stopsStatus = {\r\n        noStops: { ...stops, noStops: !noStops, all: false },\r\n        oneStop: { ...stops, oneStop: !oneStop, all: false },\r\n        twoStops: { ...stops, twoStops: !twoStops, all: false },\r\n        threeStops: { ...stops, threeStops: !threeStops, all: false },\r\n        all: {\r\n          ...stops,\r\n          all: false,\r\n          noStops: false,\r\n          oneStop: false,\r\n          twoStops: false,\r\n          threeStops: false,\r\n        },\r\n      };\r\n\r\n      for (let key in stopsStatus) {\r\n        if (key === theStop) {\r\n          return stopsStatus[key];\r\n        }\r\n      }\r\n    };\r\n\r\n    let newStops = stopsStateChange(theStop);\r\n\r\n    if (\r\n      newStops.all === false &&\r\n      newStops.noStops === true &&\r\n      newStops.oneStop === true &&\r\n      newStops.twoStops === true &&\r\n      newStops.threeStops === true\r\n    ) {\r\n      newStops = {\r\n        ...stops,\r\n        all: true,\r\n        noStops: true,\r\n        oneStop: true,\r\n        twoStops: true,\r\n        threeStops: true,\r\n      };\r\n    }\r\n    this.setState({ stops: newStops });\r\n  };\r\n\r\n  stopFilter = () => {\r\n    let arrayForFilter = [];\r\n    const currentStopsState = this.state.stops;\r\n    for (let key in currentStopsState) {\r\n      if (currentStopsState[key] === true) {\r\n        arrayForFilter = [...arrayForFilter, key];\r\n      }\r\n    }\r\n    const stopsCount = {\r\n      noStops: 0,\r\n      oneStop: 1,\r\n      twoStops: 2,\r\n      threeStops: 3,\r\n    };\r\n    arrayForFilter = arrayForFilter.map((item) => stopsCount[item]);\r\n    return arrayForFilter;\r\n  };\r\n\r\n  filterByStops = () => {\r\n    const { tickets } = this.state;\r\n    const checkArr = this.stopFilter();\r\n\r\n    function contains(arr, elem) {\r\n      for (var i = 0; i < arr.length; i++) {\r\n        if (arr[i] === elem) {\r\n          return true;\r\n        }\r\n      }\r\n      return false;\r\n    }\r\n\r\n    const result = tickets.filter((item) => contains(checkArr, item['segments'][0].stops.length));\r\n    this.moveItemsToDisplayTickets(result);\r\n    return;\r\n  };\r\n\r\n  render() {\r\n    const { displayTickets, stops } = this.state;\r\n    return (\r\n      <div className=\"wrapper\">\r\n        <div className=\"app\">\r\n          <div className=\"header\">\r\n            <Header />\r\n          </div>\r\n          <div className=\"main\">\r\n            <div className=\"left-aside\">\r\n              <FilterByStopstops handleFilter={this.handleFilter} stopsData={stops} />\r\n            </div>\r\n            <div className=\"right-aside\">\r\n              <MainWindow\r\n                displayTickets={displayTickets}\r\n                handleSortByPrice={this.handleSortByPrice}\r\n                handleSortByDuration={this.handleSortByDuration}\r\n              />\r\n            </div>\r\n          </div>\r\n        </div>\r\n      </div>\r\n    );\r\n  }\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\n// import 'errorBoundary.css';\r\n\r\nexport class ErrorBoundary extends React.Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.state = { hasError: false };\r\n  }\r\n  static getDerivedStateFromError(error) {\r\n    return { hasError: true };\r\n  }\r\n\r\n  render() {\r\n    if (this.state.hasError) {\r\n      return (\r\n        <h1>Что-то пошло не так. Скоро починим</h1>\r\n      )\r\n    }\r\n    return this.props.children;\r\n  }\r\n}\r\n","import React from 'react';\nimport ReactDOM from 'react-dom';\n\nimport './index.css';\nimport App from './app';\nimport { ErrorBoundary } from './components/errorBoundary/errorBoundary.jsx';\n\nReactDOM.render(\n  <ErrorBoundary>\n    <App />\n  </ErrorBoundary>,\n  document.getElementById('root')\n);\n"],"sourceRoot":""}